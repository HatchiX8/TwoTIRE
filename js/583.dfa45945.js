(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[583],{8803:function(t,s,e){
/*!
  * Bootstrap toast.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(s,i){t.exports=i(e(1884),e(4130),e(9069),e(1437))})(0,(function(t,s,e,i){"use strict";const o="toast",a="bs.toast",n=`.${a}`,r=`mouseover${n}`,c=`mouseout${n}`,l=`focusin${n}`,d=`focusout${n}`,u=`hide${n}`,h=`hidden${n}`,p=`show${n}`,m=`shown${n}`,g="fade",_="hide",b="show",y="showing",f={animation:"boolean",autohide:"boolean",delay:"number"},v={animation:!0,autohide:!0,delay:5e3};class w extends t{constructor(t,s){super(t,s),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return v}static get DefaultType(){return f}static get NAME(){return o}show(){const t=s.trigger(this._element,p);if(t.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(g);const e=()=>{this._element.classList.remove(y),s.trigger(this._element,m),this._maybeScheduleHide()};this._element.classList.remove(_),i.reflow(this._element),this._element.classList.add(b,y),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown())return;const t=s.trigger(this._element,u);if(t.defaultPrevented)return;const e=()=>{this._element.classList.add(_),this._element.classList.remove(y,b),s.trigger(this._element,h)};this._element.classList.add(y),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(b),super.dispose()}isShown(){return this._element.classList.contains(b)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,s){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=s;break;case"focusin":case"focusout":this._hasKeyboardInteraction=s;break}if(s)return void this._clearTimeout();const e=t.relatedTarget;this._element===e||this._element.contains(e)||this._maybeScheduleHide()}_setListeners(){s.on(this._element,r,(t=>this._onInteraction(t,!0))),s.on(this._element,c,(t=>this._onInteraction(t,!1))),s.on(this._element,l,(t=>this._onInteraction(t,!0))),s.on(this._element,d,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const s=w.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof s[t])throw new TypeError(`No method named "${t}"`);s[t](this)}}))}}return e.enableDismissTrigger(w),i.defineJQueryPlugin(w),w}))},5988:function(t,s,e){"use strict";e.d(s,{Z:function(){return w}});var i=e(3396);const o={class:"toast-container position-absolute pt-6 pe-3 top-0 end-0"};function a(t,s,e,a,n,r){const c=(0,i.up)("ToastComponent");return(0,i.wg)(),(0,i.iD)("div",o,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.messages,((t,s)=>((0,i.wg)(),(0,i.j4)(c,{key:s,msg:t},null,8,["msg"])))),128))])}e(560);var n=e(7139);const r={class:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true",ref:"toast"},c={class:"toast-header"},l={class:"me-auto"},d=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"},null,-1),u={key:0,class:"toast-body bg-light"};function h(t,s,e,o,a,h){return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",c,[(0,i._)("span",{class:(0,n.C_)([`bg-${e.msg.style}`,"p-2 rounded me-2 d-inline-block"])},null,2),(0,i._)("strong",l,(0,n.zw)(e.msg.title),1),d]),e.msg.content?((0,i.wg)(),(0,i.iD)("div",u,(0,n.zw)(e.msg.content),1)):(0,i.kq)("",!0)],512)}var p=e(8803),m=e.n(p),g={name:"ToastComponent",props:["msg"],mounted(){const t=this.$refs.toast,s=new(m())(t,{delay:1500});s.show()}},_=e(89);const b=(0,_.Z)(g,[["render",h]]);var y=b,f={components:{ToastComponent:y},data(){return{messages:[]}},inject:["emitter"],mounted(){this.emitter.on("push-message",(t=>{const{style:s="success",title:e,content:i}=t;this.messages.push({style:s,title:e,content:i})}))}};const v=(0,_.Z)(f,[["render",a]]);var w=v},8583:function(t,s,e){"use strict";e.r(s),e.d(s,{default:function(){return at}});var i=e(3396),o=e(7139),a=e(9242);const n={class:"bg-light"},r={class:"container"},c={class:"row d-flex justify-content-center"},l={class:"col-12 col-lg-5 mx-0 mx-lg-3"},d={class:"my-4"},u={id:"carouselExampleControls",class:"carousel slide","data-bs-ride":"carousel"},h={key:0,class:"carousel-inner d-flex"},p={class:"carousel-item active"},m=["src"],g={class:"carousel-item"},_=["src"],b={class:"carousel-item"},y=["src"],f={class:"carousel-item"},v=["src"],w=(0,i.uE)('<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">Next</span></button>',2),k={class:"col-12 col-lg-4"},x={class:"my-4"},I={class:"text-dark"},C={class:"fs-4"},$=(0,i._)("hr",null,null,-1),L={class:"my-3"},z=(0,i._)("option",{value:"",disabled:""},"請選擇尺寸",-1),D={class:"mb-3"},T={class:"input-group"},P={class:"mb-3 d-flex flex-column"},M=["disabled"],Q={key:0,class:"spinner-border text-dark spinner-border-sm",role:"status"},S=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),j=[S],q=["disabled"],E={key:0,class:"spinner-border text-dark spinner-border-sm",role:"status"},Z=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),H=[Z],U={class:"col-lg-9"},K=(0,i._)("h3",{class:"mb-4"},"你可能有興趣",-1),N={class:"col"},B={class:"card h-100"},Y=["onClick"],V=["src"],W={class:"card-body"},A={class:"card-title text-dark m-0"},J={class:"card-footer border-0"},O=["onClick","disabled"],F={key:0,class:"spinner-border text-dark spinner-border-sm",role:"status"},G=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),R=[G];function X(t,s,e,S,Z,G){const X=(0,i.up)("LoadingPlugin"),tt=(0,i.up)("swiper-slide"),st=(0,i.up)("swiper-container"),et=(0,i.up)("ToastMessages");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(X,{active:Z.isLoading},null,8,["active"]),(0,i._)("div",n,[(0,i._)("div",r,[(0,i._)("div",c,[(0,i._)("div",l,[(0,i._)("div",d,[(0,i._)("div",u,[Z.product.images?((0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("div",p,[(0,i._)("img",{src:Z.product.imageUrl,class:"d-block w-100",alt:"產品圖示"},null,8,m)]),(0,i._)("div",g,[(0,i._)("img",{src:Z.product.images[0],class:"d-block w-100",alt:"產品圖示"},null,8,_)]),(0,i._)("div",b,[(0,i._)("img",{src:Z.product.images[1],class:"d-block w-100",alt:"產品圖示"},null,8,y)]),(0,i._)("div",f,[(0,i._)("img",{src:Z.product.images[2],class:"d-block w-100",alt:"產品圖示"},null,8,v)])])):(0,i.kq)("",!0),w])])]),(0,i._)("div",k,[(0,i._)("div",x,[(0,i._)("div",I,[(0,i._)("h3",null,(0,o.zw)(Z.product.title),1),(0,i._)("p",C,"NT$"+(0,o.zw)(t.$filters.currency(Z.product.price)),1)]),$,(0,i._)("div",L,[(0,i.wy)((0,i._)("select",{class:"form-select text-center","onUpdate:modelValue":s[0]||(s[0]=t=>Z.size=t)},[z,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Z.productSize,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.choose},(0,o.zw)(t.choose),1)))),128))],512),[[a.bM,Z.size]])]),(0,i._)("div",D,[(0,i._)("div",T,[(0,i._)("button",{class:"btn btn-outline-primary",type:"button",onClick:s[1]||(s[1]=(...t)=>G.adder&&G.adder(...t))},"+"),(0,i.wy)((0,i._)("input",{type:"number",class:"form-control text-center","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":s[2]||(s[2]=t=>Z.productsQty=t),min:"1",disabled:""},null,512),[[a.nr,Z.productsQty]]),(0,i._)("button",{class:"btn btn-outline-primary",type:"button",onClick:s[3]||(s[3]=(...t)=>G.minus&&G.minus(...t))},"-")])]),(0,i._)("div",P,[(0,i._)("button",{class:"btn btn-outline-primary mb-3",onClick:s[4]||(s[4]=t=>G.addCart(Z.product.id)),disabled:this.status.loadingItem===Z.product.id},[this.status.loadingItem===Z.product.id?((0,i.wg)(),(0,i.iD)("div",Q,j)):(0,i.kq)("",!0),(0,i.Uk)(" 加入購物車 ")],8,M),(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:s[5]||(s[5]=t=>G.buyNow(Z.product.id)),disabled:this.status.loadingItemBuy===Z.product.id},[this.status.loadingItemBuy===Z.product.id?((0,i.wg)(),(0,i.iD)("div",E,H)):(0,i.kq)("",!0),(0,i.Uk)(" 立即購買 ")],8,q)]),(0,i._)("p",null,(0,o.zw)(Z.product.description),1),(0,i._)("p",null,(0,o.zw)(Z.product.content),1)])]),(0,i._)("div",U,[K,(0,i.Wm)(st,{"slides-per-view":"2",pagination:"true",breakpoints:{768:{slidesPerView:5}},speed:"500",class:"row row-cols-3 row-cols-lg-9 justify-content-center gx-2 pb-3"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Z.filterProducts,(t=>((0,i.wg)(),(0,i.j4)(tt,{class:"col-4 col-lg-2",key:t.id},{default:(0,i.w5)((()=>[(0,i._)("div",N,[(0,i._)("div",B,[(0,i._)("a",{href:"#",onClick:(0,a.iM)((s=>G.goProduct(t.id)),["prevent"])},[(0,i._)("img",{src:t.imageUrl,class:"card-img-top",alt:"產品圖示"},null,8,V)],8,Y),(0,i._)("div",W,[(0,i._)("h5",A,(0,o.zw)(t.title),1)]),(0,i._)("div",J,[(0,i._)("button",{class:"btn btn-primary w-100",onClick:s=>G.addCart(t.id),disabled:this.status.loadingItem===t.id},[this.status.loadingItem===t.id?((0,i.wg)(),(0,i.iD)("div",F,R)):(0,i.kq)("",!0),(0,i.Uk)(" 加入購物車 ")],8,O)])])])])),_:2},1024)))),128))])),_:1})])])])]),(0,i.Wm)(et)],64)}e(560);var tt=e(5820),st=e(5988),et={data(){return{product:{},products:[],productID:this.$route.params.id,filter:[],filterProducts:[],id:"",isLoading:!1,status:{loadingItem:"",loadingItemBuy:""},productsQty:1,productSize:[{choose:"M"}],size:""}},components:{ToastMessages:st.Z},provide(){return{emitter:tt.Z}},inject:["reload"],watch:{$route(t){this.productID=t.params.id,this.reload()}},methods:{async getProduct(){const t=`https://vue3-course-api.hexschool.io/api/twotire-api/product/${this.id}`;this.isLoading=!0;const s=await this.$http.get(t);this.isLoading=!1,s.data.success&&(this.product=s.data.product)},getProducts(){const t="https://vue3-course-api.hexschool.io/api/twotire-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{if(this.isLoading=!1,t.data.success){function s(t){return Math.floor(Math.random()*t)}this.products=t.data.products,this.filter=this.products.filter((t=>t.category===this.product.category&&this.product.id!==t.id));const e=new Set([]);for(let i=0;e.size<(this.filter.length<5?this.filter.length:5);i+1){const o=s(this.filter.length);e.add(o)}e.forEach((t=>{this.filterProducts.push(this.filter[t])}))}}))},addCart(t,s=this.productsQty){const e="https://vue3-course-api.hexschool.io/api/twotire-api/cart";this.status.loadingItem=t;const i={product_id:t,qty:s},{size:o}=this.size;this.$http.post(e,{data:i,size:o}).then((t=>{this.status.loadingItem="",this.$httpMessageState(t,"加入購物車"),console.log(t),tt.Z.emit("updateCart")}))},buyNow(t,s=this.productsQty){const e="https://vue3-course-api.hexschool.io/api/twotire-api/cart";this.status.loadingItemBuy=t;const i={product_id:t,qty:s};this.$http.post(e,{data:i}).then((t=>{this.status.loadingItemBuy="",console.log(t),t.data.success&&(tt.Z.emit("updateCart"),this.$router.push("/cart"))}))},goProduct(t){this.$router.push(`/product/${t}`)},adder(){this.productsQty+=1},minus(){this.productsQty<=1?this.productsQty=1:this.productsQty-=1}},async created(){this.id=this.$route.params.productId,await this.getProduct(),this.getProducts()},mounted(){}},it=e(89);const ot=(0,it.Z)(et,[["render",X]]);var at=ot}}]);
//# sourceMappingURL=583.dfa45945.js.map