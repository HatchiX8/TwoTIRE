"use strict";(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[519],{1590:function(t,a,e){e.d(a,{Z:function(){return k}});var i=e(3396),s=e(7139),n=e(9242);const o={"aria-label":"Page navigation example"},r={class:"pagination justify-content-center"},c={class:"page-item"},d=(0,i._)("span",{"aria-hidden":"true"},"«",-1),l=[d],p=["onClick"],u={class:"page-item"},g=(0,i._)("span",{"aria-hidden":"true"},"»",-1),h=[g];function m(t,a,e,d,g,m){return(0,i.wg)(),(0,i.iD)("nav",o,[(0,i._)("ul",r,[(0,i._)("li",c,[(0,i._)("a",{class:(0,s.C_)(["page-link",{disabled:!1===e.pages.has_pre}]),href:"#","aria-label":"Previous",onClick:a[0]||(a[0]=(0,n.iM)((t=>m.updatePage(e.pages.current_page-1)),["prevent"]))},l,2)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.pages.total_pages,(t=>((0,i.wg)(),(0,i.iD)("li",{class:(0,s.C_)(["page-item",{active:t===e.pages.current_page}]),key:t},[(0,i._)("a",{class:"page-link",href:"#",onClick:(0,n.iM)((a=>m.updatePage(t)),["prevent"])},(0,s.zw)(t),9,p)],2)))),128)),(0,i._)("li",u,[(0,i._)("a",{class:(0,s.C_)(["page-link",{disabled:!1===e.pages.has_next}]),href:"#","aria-label":"Next",onClick:a[1]||(a[1]=(0,n.iM)((t=>m.updatePage(e.pages.current_page+1)),["prevent"]))},h,2)])])])}var _={props:["pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},v=e(89);const w=(0,v.Z)(_,[["render",m]]);var k=w},7519:function(t,a,e){e.r(a),e.d(a,{default:function(){return x}});var i=e(3396),s=e(9242),n=e(7139);const o={class:"row row-cols-2 row-cols-lg-4 d-flex justify-content-start flex-wrap g-3 mt-2 mb-3"},r={class:"card h-100"},c=["onClick"],d=["src"],l={class:"card-body"},p={class:"card-title text-dark m-0"},u={class:"card-footer border-0"},g=["onClick","disabled"],h={key:0,class:"spinner-border text-warning spinner-border-sm",role:"status"},m=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),_=[m],v={class:"d-flex justify-content-center"};function w(t,a,e,m,w,k){const f=(0,i.up)("LoadingPlugin"),b=(0,i.up)("PaginationComponent");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(f,{active:w.isLoading},null,8,["active"]),(0,i._)("div",o,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.products,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col",key:t.id},[(0,i._)("div",r,[(0,i._)("a",{href:"#",onClick:(0,s.iM)((a=>k.getProduct(t.id)),["prevent"])},[(0,i._)("img",{src:t.imageUrl,class:"card-img-top",alt:"產品圖示"},null,8,d)],8,c),(0,i._)("div",l,[(0,i._)("h5",p,(0,n.zw)(t.title),1)]),(0,i._)("div",u,[(0,i._)("button",{type:"button",class:"btn btn-primary w-100 text-nowrap px-0",onClick:a=>k.addCart(t.id),disabled:this.status.loadingItem===t.id},[this.status.loadingItem===t.id?((0,i.wg)(),(0,i.iD)("div",h,_)):(0,i.kq)("",!0),(0,i.Uk)(" 加入購物車 ")],8,g)])])])))),128))]),(0,i._)("div",v,[(0,i.Wm)(b,{pages:w.pagination,onEmitPages:k.getProducts},null,8,["pages","onEmitPages"])])],64)}e(560);var k=e(1590),f=e(5820),b={data(){return{products:[],pagination:{},isLoading:!1,status:{loadingItem:""}}},provide(){return{emitter:f.Z}},components:{PaginationComponent:k.Z},methods:{getProducts(t=1){const a=`https://vue3-course-api.hexschool.io/api/twotire-api/products/?page=${t}`;this.isLoading=!0,this.$http.get(a).then((t=>{this.isLoading=!1,t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination)}))},getProduct(t){this.$router.push(`/product/${t}`)},addCart(t){const a="https://vue3-course-api.hexschool.io/api/twotire-api/cart";this.status.loadingItem=t;const e={product_id:t,qty:1};this.$http.post(a,{data:e}).then((t=>{this.status.loadingItem="",this.$httpMessageState(t,"加入購物車"),f.Z.emit("updateCart")}))}},mounted(){this.getProducts()}},C=e(89);const P=(0,C.Z)(b,[["render",w]]);var x=P}}]);
//# sourceMappingURL=519.eb97eab3.js.map