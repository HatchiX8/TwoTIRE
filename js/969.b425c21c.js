"use strict";(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[969],{9266:function(t,e,a){a.d(e,{Z:function(){return u}});var s=a(3396);const n={class:"checkout-banner"},i=(0,s._)("div",{class:"container"},[(0,s._)("div",{class:"d-flex justify-content-center align-items-center checkout-box flex-column","data-aos":"zoom-in","data-aos-duration":"3000","data-aos-easing":"quad"},[(0,s._)("h1",{class:"text-primary rounded-4 p-3 text-center payBall"},"You deserve to have")])],-1),o=[i];function d(t,e){return(0,s.wg)(),(0,s.iD)("div",n,o)}var l=a(89);const r={},c=(0,l.Z)(r,[["render",d]]);var u=c},2969:function(t,e,a){a.r(e),a.d(e,{default:function(){return Q}});var s=a(3396),n=a(7139),i=a(9242);const o={class:"bg-warning body"},d={class:"container"},l={class:"row row-cols-lg-10 d-flex justify-content-center py-lg-4"},r={class:"col-12 col-lg-7 my-3 my-lg-0"},c={class:"bg-light px-2 py-3 rounded-3"},u=(0,s._)("h4",{class:"ps-2 fw-bold text-dark"},"購物車內容",-1),p={class:""},h=(0,s._)("thead",null,[(0,s._)("tr",{class:"text-center"},[(0,s._)("th",{width:"150",class:"d-none d-lg-block"}),(0,s._)("th",{width:"140"},"產品名稱"),(0,s._)("th",{width:"120"},"尺寸"),(0,s._)("th",{width:"75"},"數量"),(0,s._)("th",{width:"120"},"單價"),(0,s._)("th",{width:"50"}),(0,s._)("th")])],-1),g=["src"],_={class:"px-3"},b={class:"form-select"},m={class:"text-right"},x={class:"input-group mt-lg-1"},y=["onUpdate:modelValue","disabled","onChange"],w={class:"text-danger"},v=["onClick","disabled"],C=(0,s._)("i",{class:"bi bi-x"},null,-1),k=[C],f={key:0,class:"text-end pe-4"},$=(0,s._)("p",{class:"text-end text-danger fs-4"},"商品數量上限為50",-1),q=[$],I={class:"col-lg-3 sticky-top z-1",style:{height:"100%",top:"80px"}},W={class:"bg-light rounded-3 px-2 py-3 mb-3"},z=(0,s._)("h5",{class:"ps-2 fw-bold text-dark"},"優惠碼",-1),L={class:"input-group"},D={class:"bg-light rounded-3 px-2 mb-3 py-3"},Z=(0,s._)("h5",{class:"ps-2 fw-bold text-dark"},"小記明細",-1),j={class:"table align-middle"},U=(0,s._)("th",{colspan:"2",class:"text-dark"},"商品金額",-1),Y={class:"text-end text-dark"},B=(0,s._)("th",{colspan:"2",class:"text-dark"},"總計",-1),H={class:"text-end text-danger fs-3"},N={key:0},V=(0,s._)("th",{colspan:"2",class:"text-dark"},null,-1),A=(0,s._)("td",{class:"text-end text-success"},"已套用優惠券",-1),G=[V,A];function K(t,e,a,C,$,V){const A=(0,s.up)("LoadingPlugin"),K=(0,s.up)("CheckoutBanner");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(A,{active:$.isLoading},null,8,["active"]),(0,s.Wm)(K),(0,s._)("div",o,[(0,s._)("div",d,[(0,s._)("div",l,[(0,s._)("div",r,[(0,s._)("div",c,[u,(0,s._)("table",p,[h,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)($.cart.carts,(e=>((0,s.wg)(),(0,s.iD)("tr",{class:"text-center",key:e.id},[(0,s._)("img",{src:e.product.imageUrl,class:"d-block w-100 d-none d-lg-block",alt:"產品圖"},null,8,g),(0,s._)("td",null,(0,n.zw)(e.product.title),1),(0,s._)("td",_,[(0,s._)("select",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)($.productSize,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.choose},(0,n.zw)(t.choose),1)))),128))])]),(0,s._)("td",m,[(0,s._)("div",x,[(0,s.wy)((0,s._)("input",{type:"number",class:"form-control text-center","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":t=>e.qty=t,min:"1",disabled:e.id===this.status.loadingItem,onChange:t=>V.updateCart(e)},null,40,y),[[i.nr,e.qty,void 0,{number:!0}]])])]),(0,s._)("td",null,[(0,s._)("span",w,"$"+(0,n.zw)(t.$filters.currency(e.product.price)),1)]),(0,s._)("td",null,[(0,s._)("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:t=>V.removeCartItem(e.id),disabled:e.id===$.status.loadingItem},k,8,v)])])))),128))])]),1==this.qtyWarning?((0,s.wg)(),(0,s.iD)("div",f,q)):(0,s.kq)("",!0)])]),(0,s._)("div",I,[(0,s._)("div",W,[z,(0,s._)("div",L,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","aria-label":"請輸入優惠碼","aria-describedby":"btnGroupAddon","onUpdate:modelValue":e[0]||(e[0]=t=>$.coupon_code=t)},null,512),[[i.nr,$.coupon_code]]),(0,s._)("button",{class:"input-group-text btn btn-primary",id:"btnGroupAddon",onClick:e[1]||(e[1]=(...t)=>V.addCouponCode&&V.addCouponCode(...t))}," 套用優惠碼 ")])]),(0,s._)("div",D,[Z,(0,s._)("table",j,[(0,s._)("tbody",null,[(0,s._)("tr",null,[U,(0,s._)("td",Y,"$"+(0,n.zw)(t.$filters.currency($.cart.total)),1)])]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[B,(0,s._)("td",H," $"+(0,n.zw)(t.$filters.currency($.cart.final_total)),1)]),$.cart.final_total!==$.cart.total?((0,s.wg)(),(0,s.iD)("tr",N,G)):(0,s.kq)("",!0)])]),(0,s._)("a",{class:(0,n.C_)(["btn btn-outline-primary w-100",{disabled:1==$.cartWarning}]),onClick:e[2]||(e[2]=(0,i.iM)(((...t)=>V.cartNext&&V.cartNext(...t)),["prevent"]))},"下一步",2)])])])])])],64)}a(560);var M=a(6905),S=a.n(M),E=a(5820),P=a(9266),F={data(){return{cart:[],isLoading:!1,status:{loadingItem:""},coupon_code:"",productSize:[{choose:"M"}],qtyWarning:!1,cartWarning:!0}},provide(){return{emitter:E.Z}},inject:["emitter","reload"],components:{CheckoutBanner:P.Z},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/twotire-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.cart=t.data.data,0===this.cart.total?this.cartWarning=!0:this.cartWarning=!1)}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/twotire-api/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const a={product_id:t.product_id,qty:t.qty};t.qty>=51?(this.qtyWarning=!0,this.isLoading=!1,this.status.loadingItem=""):this.$http.put(e,{data:a}).then((()=>{this.status.loadingItem="",this.getCart(),E.Z.emit("updateCart"),this.qtyWarning=!1}))},removeCartItem(t){this.status.loadingItem=t;const e=`https://vue3-course-api.hexschool.io/api/twotire-api/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((()=>{this.getCart(),this.status.loadingItem="",this.isLoading=!1,E.Z.emit("updateCart")}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/twotire-api/coupon",e={code:this.coupon_code};this.$http.post(t,{data:e}).then((()=>{this.getCart(),this.coupon_code=""}))},cartNext(){this.$router.push("/order")}},created(){E.Z.on("updateCart",(()=>{this.getCart()}))},mounted(){this.getCart(),S().init()}},J=a(89);const O=(0,J.Z)(F,[["render",K]]);var Q=O}}]);
//# sourceMappingURL=969.b425c21c.js.map