{"version":3,"file":"js/219.8bd05eb3.js","mappings":"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","sources":["webpack://new-project/./src/views/CouponsView.vue","webpack://new-project/./src/components/CouponModal.vue","webpack://new-project/./src/components/CouponModal.vue?3d2f","webpack://new-project/./src/views/CouponsView.vue?6fc5"],"sourcesContent":["<template>\n  <div>\n    <LoadingPlugin :active=\"isLoading\"></LoadingPlugin>\n    <div class=\"vh-100\">\n      <div class=\"text-end mt-4\">\n        <button class=\"btn btn-primary\" @click=\"openCouponModal(true)\">建立新的優惠券</button>\n      </div>\n      <table class=\"table mt-4\">\n        <thead>\n          <tr>\n            <th>名稱</th>\n            <th>折扣百分比</th>\n            <th>到期日</th>\n            <th>是否啟用</th>\n            <th>編輯</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(item, key) in coupons\" :key=\"key\">\n            <td>{{ item.title }}</td>\n            <td>{{ item.percent }}%</td>\n            <td>{{ $filters.date(item.due_date) }}</td>\n            <td>\n              <span v-if=\"item.is_enabled === 1\" class=\"text-success\">啟用</span>\n              <span v-else class=\"text-muted\">未起用</span>\n            </td>\n            <td>\n              <div class=\"btn-group\">\n                <button\n                  class=\"btn btn-outline-primary btn-sm\"\n                  @click=\"openCouponModal(false, item)\">\n                  編輯\n                </button>\n                <button class=\"btn btn-outline-danger btn-sm\" @click=\"openDelCouponModal(item)\">\n                  刪除\n                </button>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <couponModal :coupon=\"tempCoupon\" ref=\"couponModal\" @update-coupon=\"updateCoupon\" />\n    <DelModal :item=\"tempCoupon\" ref=\"delModal\" @del-item=\"delCoupon\" />\n  </div>\n</template>\n\n<script>\nimport CouponModal from '@/components/CouponModal.vue';\nimport DelModal from '@/components/DelModal.vue';\n\nexport default {\n  components: { CouponModal, DelModal },\n  props: {\n    config: Object,\n  },\n  data() {\n    return {\n      coupons: {},\n      tempCoupon: {\n        title: '',\n        is_enabled: 0,\n        percent: 100,\n        code: '',\n      },\n      isLoading: false,\n      isNew: false,\n    };\n  },\n  methods: {\n    openCouponModal(isNew, item) {\n      this.isNew = isNew;\n      if (this.isNew) {\n        this.tempCoupon = {\n          due_date: new Date().getTime() / 1000,\n        };\n      } else {\n        this.tempCoupon = { ...item };\n      }\n      this.$refs.couponModal.showModal();\n    },\n    openDelCouponModal(item) {\n      this.tempCoupon = { ...item };\n      const delComponent = this.$refs.delModal;\n      delComponent.showModal();\n    },\n    getCoupons() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupons`;\n      this.$http.get(url, this.tempProduct).then((response) => {\n        this.coupons = response.data.coupons;\n        this.isLoading = false;\n      });\n    },\n    updateCoupon(tempCoupon) {\n      if (this.isNew) {\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon`;\n        this.$http.post(url, { data: tempCoupon }).then((response) => {\n          this.$httpMessageState(response, '新增優惠券');\n          this.getCoupons();\n          this.$refs.couponModal.hideModal();\n        });\n      } else {\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\n        this.$http.put(url, { data: this.tempCoupon }).then((response) => {\n          this.$httpMessageState(response, '新增優惠券');\n          this.getCoupons();\n          this.$refs.couponModal.hideModal();\n        });\n      }\n    },\n    delCoupon() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\n      this.isLoading = true;\n      this.$http.delete(url).then((response) => {\n        this.$httpMessageState(response, '刪除優惠券');\n        const delComponent = this.$refs.delModal;\n        delComponent.hideModal();\n        this.getCoupons();\n      });\n    },\n  },\n  created() {\n    this.getCoupons();\n  },\n};\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"couponModal\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\">\n    <div class=\"modal-dialog\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header bg-warning\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">優惠券</h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"mb-3\">\n            <label for=\"title\">標題</label>\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              id=\"title\"\n              v-model=\"tempCoupon.title\"\n              placeholder=\"請輸入標題\" />\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"coupon_code\">優惠碼</label>\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              id=\"coupon_code\"\n              v-model=\"tempCoupon.code\"\n              placeholder=\"請輸入優惠碼\" />\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"due_date\">到期日</label>\n            <input type=\"date\" class=\"form-control\" id=\"due_date\" v-model=\"due_date\" />\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"price\">折扣百分比</label>\n            <input\n              type=\"number\"\n              class=\"form-control\"\n              id=\"price\"\n              v-model.number=\"tempCoupon.percent\"\n              placeholder=\"請輸入折扣百分比\" />\n          </div>\n          <div class=\"mb-3\">\n            <div class=\"form-check\">\n              <input\n                class=\"form-check-input\"\n                type=\"checkbox\"\n                :true-value=\"1\"\n                :false-value=\"0\"\n                v-model=\"tempCoupon.is_enabled\"\n                id=\"is_enabled\" />\n              <label class=\"form-check-label\" for=\"is_enabled\"> 是否啟用 </label>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-outline-primary\" data-bs-dismiss=\"modal\">\n            Close\n          </button>\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"$emit('update-coupon', tempCoupon)\">\n            更新優惠券\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  name: 'couponModal',\n  props: {\n    coupon: {},\n  },\n  data() {\n    return {\n      tempCoupon: {},\n      due_date: '',\n    };\n  },\n  emits: ['update-coupon'],\n  watch: {\n    coupon() {\n      this.tempCoupon = this.coupon;\n      // 將時間格式改為 YYYY-MM-DD\n      const dateAndTime = new Date(this.tempCoupon.due_date * 1000).toISOString().split('T');\n      [this.due_date] = dateAndTime;\n    },\n    due_date() {\n      this.tempCoupon.due_date = Math.floor(new Date(this.due_date) / 1000);\n    },\n  },\n  mixins: [modalMixin],\n};\n</script>\n","import { render } from \"./CouponModal.vue?vue&type=template&id=29bc4ac0\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CouponsView.vue?vue&type=template&id=16c1a752\"\nimport script from \"./CouponsView.vue?vue&type=script&lang=js\"\nexport * from \"./CouponsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","key","_createElementBlock","_createVNode","_component_LoadingPlugin","active","$data","isLoading","_hoisted_1","_hoisted_2","onClick","_cache","$event","$options","openCouponModal","_hoisted_3","_hoisted_4","_Fragment","_renderList","coupons","item","_toDisplayString","title","percent","_ctx","$filters","date","due_date","is_enabled","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","openDelCouponModal","_hoisted_9","_component_couponModal","coupon","tempCoupon","ref","onUpdateCoupon","updateCoupon","_component_DelModal","onDelItem","delCoupon","id","tabindex","role","type","for","placeholder","code","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","number","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","$emit","name","props","data","emits","watch","this","dateAndTime","Date","toISOString","split","Math","floor","mixins","modalMixin","__exports__","components","CouponModal","DelModal","config","Object","isNew","methods","getTime","$refs","couponModal","showModal","delComponent","delModal","getCoupons","url","$http","get","tempProduct","then","response","post","$httpMessageState","hideModal","put","delete","created","render"],"sourceRoot":""}